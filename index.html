<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Convite para ir comer sushi</title>
  <style>
    :root{--bg:#0b1020;--card:#0f1724;--accent:#ff6b6b}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial,Helvetica,sans-serif;background:linear-gradient(180deg,#071028 0%, #081226 60%);color:#fff}
    .stage{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:3rem}
    .card{position:relative;width:940px;max-width:96%;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(0,0,0,0.15));border-radius:16px;padding:36px;box-shadow:0 10px 30px rgba(3,7,18,0.6);overflow:hidden}
    h1{margin:0 0 8px;font-size:28px}
    p.date{margin:0 0 18px;opacity:0.9}
    .question{font-size:18px;margin-bottom:18px}
    .actions{display:flex;gap:12px}
    button{cursor:pointer;padding:12px 18px;border-radius:10px;border:0;font-weight:600;font-size:15px}
    .btn-no{background:#2d3748;color:#fff;box-shadow:inset 0 -3px 0 rgba(0,0,0,0.15)}
    .btn-yes{background:linear-gradient(90deg,#00d4a6,#00a3ff);color:#041024}
    .tiny{font-size:13px;opacity:0.9;margin-top:12px}

    /* sushi rain */
    .sushi-wrapper{pointer-events:none;position:absolute;inset:0;overflow:hidden;z-index:2}
    .sushi{position:absolute;top:-10%;font-size:24px;animation-name:fall;animation-timing-function:linear;animation-iteration-count:infinite;will-change:transform,opacity}
    @keyframes fall{
      0%{transform:translateY(-10vh) rotate(0deg);opacity:0}
      10%{opacity:1}
      100%{transform:translateY(110vh) rotate(360deg);opacity:1}
    }

    /* subtle confetti behind text */
    .bg-decor{position:absolute;right:-10%;top:-30%;width:420px;height:420px;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(0,183,255,0.12), transparent 30%), radial-gradient(circle at 70% 70%, rgba(0,255,144,0.06), transparent 30%);filter:blur(40px);z-index:0}

    /* accessibility and small screens */
    @media (max-width:560px){h1{font-size:20px}.question{font-size:16px}.sushi{font-size:18px}}
  </style>
</head>
<body>
  <div class="stage">
    <div class="card" role="main" aria-labelledby="title">
      <div class="bg-decor" aria-hidden="true"></div>
      <div class="sushi-wrapper" aria-hidden="true" id="sushiWrapper"></div>

      <h1 id="title">Convite especial üç£</h1>
      <p class="date">Data: <strong id="eventDate">28/11/2025</strong></p>
      <p class="question">Voc√™ aceita ir comer sushi comigo?</p>

      <div class="actions">
        <button id="btnYes" class="btn-yes" aria-pressed="false">Sim</button>
        <button id="btnNo" class="btn-no" aria-pressed="false">N√£o</button>
      </div>
      <p class="tiny">Obs: ambos os bot√µes s√£o igualmente clic√°veis ‚Äî sem truques.</p>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>
  <script>
    // ====== CONFIGURA√á√ïES IMPORTANTES ======
    // Substitua os valores abaixo pelos seus IDs do EmailJS
    // Crie uma conta em https://www.emailjs.com, configure um service (ex: 'gmail'), e um template
    const EMAILJS_USER_ID = '0ebC-paeN26CQkfSo'; // ex: user_xxx
    const EMAILJS_SERVICE_ID = 'service_jlv0s9c';   // ex: service_xxx
    const EMAILJS_TEMPLATE_ID = 'template_g2dbi1i'; // ex: template_xxx
    const OWNER_NOTIFY_EMAIL = 'geolopes829@gmail.com'; // email que receber√° a notifica√ß√£o (pode ser um e-mail-to-SMS)

    // Obs sobre "sem a pessoa saber": o c√≥digo envia uma notifica√ß√£o para o email configurado
    // quando o visitante clicar em "Sim". Isso √© feito discretamente sem mostrar mensagens ao visitante.
    // IMPORTANTE: para seguran√ßa e confiabilidade, configure EmailJS e teste por si mesmo.

    // Inicializa EmailJS
    if (window.emailjs) {
      emailjs.init(EMAILJS_USER_ID);
    }

    // ==== Elementos e comportamento dos bot√µes ====
    const btnYes = document.getElementById('btnYes');
    const btnNo = document.getElementById('btnNo');

    // Marcar ambos como igualmente clic√°veis (acessibilidade)
    [btnYes, btnNo].forEach(btn => {
      btn.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') btn.click();
      });
    });

    // Ao clicar em Sim: enviar notifica√ß√£o (silenciosa)
    btnYes.addEventListener('click', async () => {
      // toggle visual state briefly for UX, but do not show text-based alert
      btnYes.disabled = true;
      btnYes.setAttribute('aria-pressed','true');

      // prepare payload for EmailJS template
      const templateParams = {
        to_email: OWNER_NOTIFY_EMAIL,
        answer: 'Sim',
        timestamp: new Date().toLocaleString(),
        page: location.href
      };

      // Tenta enviar pelo EmailJS se configurado
      if (window.emailjs && EMAILJS_USER_ID !== '0ebC-paeN26CQkfSo') {
        try {
          await emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_ID, templateParams);
          // n√£o mostramos nada ao visitante ‚Äî apenas log no console para o dono
          console.log('Notifica√ß√£o enviada (sim).');
        } catch (err) {
          console.error('Falha ao enviar notifica√ß√£o:', err);
        }
      } else {
        // fallback: enviar requisi√ß√£o POST a um endpoint pr√≥prio
        // caso queira usar seu pr√≥prio backend, substitua URL pelo seu servidor.
        try {
          await fetch('https://example.com/notify', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify(templateParams)
          });
          console.log('Notifica√ß√£o enviada via fallback.');
        } catch (err) {
          console.log('Fallback de notifica√ß√£o falhou (provavelmente n√£o configurado).');
        }
      }

      // mant√©m bot√£o desabilitado por 3s para evitar cliques repetidos
      setTimeout(() => { btnYes.disabled = false; btnYes.setAttribute('aria-pressed','false'); }, 3000);
    });

    // Ao clicar em N√£o: comportamento simples e vis√≠vel
    btnNo.addEventListener('click', () => {
      btnNo.setAttribute('aria-pressed','true');
      // voc√™ pode adicionar um comportamento extra aqui, por exemplo: redirecionar, animar, etc.
    });

    // ====== Anima√ß√£o: chuva de sushis ======
    const sushiWrapper = document.getElementById('sushiWrapper');
    const SUSHI_EMOJI = 'üç£'; // escolha um emoji ou use imagens
    const COUNT = 28; // quantos sushis simult√¢neos (ajuste conforme desejar)

    function createSushi() {
      const el = document.createElement('div');
      el.className = 'sushi';
      el.innerText = SUSHI_EMOJI;
      // random position and speed
      const left = Math.random() * 100; // vw
      const size = 14 + Math.random() * 30; // px
      const duration = 5 + Math.random() * 8; // seconds
      const delay = -Math.random() * 10; // negative delay so they start at different points

      el.style.left = left + 'vw';
      el.style.fontSize = size + 'px';
      el.style.animationDuration = duration + 's';
      el.style.animationDelay = delay + 's';

      sushiWrapper.appendChild(el);

      // remove after animation to avoid DOM bloat (will be reused by continuous creation)
      setTimeout(() => { el.remove(); }, (duration + Math.abs(delay) + 1) * 1000);
    }

    // continuously keep COUNT sushis falling
    function startSushiRain() {
      // create initial batch
      for (let i=0;i<COUNT;i++) createSushi();
      // then keep adding over time
      setInterval(() => createSushi(), 700);
    }

    startSushiRain();

    // ====== Data do evento ======
    // Se preferir outro ano, edite aqui. Para o pedido original usei 28/11/2025
    document.getElementById('eventDate').innerText = '28/11/2025';

  </script>
</body>
</html>
